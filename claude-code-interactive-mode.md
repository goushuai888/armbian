# Claude Code 交互模式

Claude Code 的交互模式提供了丰富的键盘快捷键和操作方式，让你能够高效地与 AI 助手进行交互。本指南将详细介绍所有可用的交互功能。

> 📖 **官方文档**: [Claude Code 交互模式](https://docs.anthropic.com/zh-CN/docs/claude-code/interactive-mode) | [完整指南](https://docs.anthropic.com/zh-CN/docs/claude-code/overview)

## 键盘快捷键

### 通用控制

| 快捷键 | 描述 | 上下文 |
| --- | --- | --- |
| `Ctrl+C` | 取消当前输入或生成 | 标准中断 |
| `Ctrl+D` | 退出 Claude Code 会话 | EOF 信号 |
| `Ctrl+L` | 清除终端屏幕 | 保留对话历史 |
| `上/下箭头` | 导航命令历史 | 回调之前的输入 |
| `Esc` + `Esc` | 编辑上一条消息 | 双击 escape 键修改 |

### 多行输入

当你需要输入多行内容时，可以使用以下方法：

| 方法 | 快捷键 | 上下文 |
| --- | --- | --- |
| 快速转义 | `\` + `Enter` | 在所有终端中有效 |
| macOS 默认 | `Option+Enter` | macOS 上的默认设置 |
| 终端设置 | `Shift+Enter` | 在 `/terminal-setup` 之后 |
| 控制序列 | `Ctrl+J` | 多行的换行字符 |
| 粘贴模式 | 直接粘贴 | 用于代码块、日志 |

### 快速命令

| 快捷键 | 描述 | 注释 |
| --- | --- | --- |
| 开头的 `#` | 内存快捷键 - 添加到 CLAUDE.md | 提示文件选择 |
| 开头的 `/` | 斜杠命令 | 参见[斜杠命令](./claude-code-slash-commands) |

## Vim 模式

Claude Code 支持 vim 风格的编辑模式，为 vim 用户提供熟悉的操作体验。

### 启用 Vim 模式
- **临时启用**: 使用 `/vim` 命令
- **永久启用**: 通过 `/config` 配置

### 模式切换

| 命令 | 动作 | 从模式 |
| --- | --- | --- |
| `Esc` | 进入 NORMAL 模式 | INSERT |
| `i` | 在光标前插入 | NORMAL |
| `I` | 在行首插入 | NORMAL |
| `a` | 在光标后插入 | NORMAL |
| `A` | 在行尾插入 | NORMAL |
| `o` | 在下方打开新行 | NORMAL |
| `O` | 在上方打开新行 | NORMAL |

### 导航（NORMAL 模式）

#### 基础移动
| 命令 | 动作 |
| --- | --- |
| `h`/`j`/`k`/`l` | 向左/下/上/右移动 |
| `w` | 下一个单词 |
| `e` | 单词末尾 |
| `b` | 上一个单词 |

#### 行内导航
| 命令 | 动作 |
| --- | --- |
| `0` | 行首 |
| `$` | 行尾 |
| `^` | 第一个非空白字符 |

#### 文档导航
| 命令 | 动作 |
| --- | --- |
| `gg` | 输入开头 |
| `G` | 输入末尾 |

### 编辑（NORMAL 模式）

#### 删除操作
| 命令 | 动作 |
| --- | --- |
| `x` | 删除字符 |
| `dd` | 删除行 |
| `D` | 删除到行尾 |
| `dw`/`de`/`db` | 删除单词/到末尾/向后 |

#### 更改操作
| 命令 | 动作 |
| --- | --- |
| `cc` | 更改行 |
| `C` | 更改到行尾 |
| `cw`/`ce`/`cb` | 更改单词/到末尾/向后 |
| `.` | 重复上次更改 |

## 命令历史

Claude Code 提供强大的命令历史功能，帮助你快速重用之前的命令：

### 历史管理
- **存储方式**: 历史按工作目录存储
- **清除方式**: 使用 `/clear` 命令清除
- **导航方式**: 使用上/下箭头键导航历史
- **搜索功能**: **Ctrl+R** 反向搜索历史（如果终端支持）

### 注意事项
- **历史扩展**：`!` 命令默认禁用，避免意外执行历史命令

## 实用技巧

### 高效输入技巧

1. **代码块输入**
   - 直接粘贴代码块，Claude Code 会自动检测并保持格式
   - 使用 `\` + `Enter` 快速添加新行

2. **命令组合**
   - 结合斜杠命令和普通对话
   - 使用 `#` 开头的消息添加到项目记忆

3. **历史重用**
   - 使用箭头键快速找到之前的命令
   - `Esc` + `Esc` 编辑上一条消息而不是重新输入

### 工作流程优化

1. **多行编辑**
   ```
   # 使用反斜杠续行
   这是第一行 \
   这是第二行 \
   这是第三行
   ```

2. **快速记忆添加**
   ```
   # 这条信息会被添加到 CLAUDE.md
   记住：这个项目使用 TypeScript + React
   ```

3. **命令链式操作**
   ```
   /model opus
   请帮我优化这段代码的性能
   ```

## 故障排除

### 常见问题

**多行输入不工作？**
- 检查终端是否支持相应的快捷键
- 尝试使用 `/terminal-setup` 配置 Shift+Enter
- 使用通用的 `\` + `Enter` 方法

**Vim 模式无法启用？**
- 确认使用 `/vim` 命令
- 通过 `/config` 检查配置设置
- 重启 Claude Code 会话

**历史搜索无法使用？**
- 确认终端支持 Ctrl+R
- 检查终端的键绑定设置
- 尝试使用上/下箭头键手动导航

## 相关文档

- [斜杠命令](./claude-code-slash-commands) - 交互会话中的专用命令
- [CLI 参考](https://docs.anthropic.com/zh-CN/docs/claude-code/cli-reference) - 命令行标志和选项
- [设置配置](https://docs.anthropic.com/zh-CN/docs/claude-code/settings) - 个性化配置选项
- [内存管理](https://docs.anthropic.com/zh-CN/docs/claude-code/memory) - 管理 CLAUDE.md 文件

通过掌握这些交互模式功能，你将能够更高效地使用 Claude Code，提升开发效率和体验。